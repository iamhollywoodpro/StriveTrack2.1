<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StriveTrack Community Hub - LIVE TEST</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-2">
                🚀 StriveTrack 2.0 - Community Hub 
            </h1>
            <p class="text-lg text-gray-600">Live API Testing - Your backend is WORKING! 🎉</p>
            <div class="mt-4 p-4 bg-green-100 rounded-lg border border-green-300">
                <p class="text-green-800 font-medium">✅ API Status: <span id="apiStatus">LIVE at strivetrack-media-api.iamhollywoodpro.workers.dev</span></p>
            </div>
        </div>

        <!-- Quick Test Buttons -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h2 class="text-xl font-bold mb-4">🔥 Quick API Tests</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <button onclick="testPosts()" class="bg-blue-500 text-white px-4 py-3 rounded-lg hover:bg-blue-600 transition">
                    📝 Posts
                </button>
                <button onclick="testUsers()" class="bg-green-500 text-white px-4 py-3 rounded-lg hover:bg-green-600 transition">
                    👥 Users  
                </button>
                <button onclick="testFriends()" class="bg-purple-500 text-white px-4 py-3 rounded-lg hover:bg-purple-600 transition">
                    🤝 Friends
                </button>
                <button onclick="testLeaderboard()" class="bg-orange-500 text-white px-4 py-3 rounded-lg hover:bg-orange-600 transition">
                    🏆 Leaderboard
                </button>
            </div>
        </div>

        <!-- Live Results -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h2 class="text-xl font-bold mb-4">📊 Live Test Results</h2>
            <div id="results" class="space-y-4">
                <div class="text-center text-gray-500 py-8">
                    Click any button above to test your Community Hub features! 🎯
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'https://strivetrack-media-api.iamhollywoodpro.workers.dev';
        
        function addResult(test, success, data, timing) {
            const results = document.getElementById('results');
            const icon = success ? '✅' : '❌';
            const color = success ? 'border-green-200 bg-green-50' : 'border-red-200 bg-red-50';
            
            results.innerHTML = `
                <div class="border ${color} rounded-lg p-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-bold">${icon} ${test}</span>
                        <span class="text-sm text-gray-500">${timing}ms</span>
                    </div>
                    <pre class="text-sm overflow-auto max-h-40 bg-gray-100 p-3 rounded">${JSON.stringify(data, null, 2)}</pre>
                </div>
            ` + results.innerHTML;
        }
        
        async function testEndpoint(name, endpoint) {
            const start = Date.now();
            try {
                const response = await axios.get(API_URL + endpoint, { timeout: 10000 });
                const timing = Date.now() - start;
                addResult(name, true, response.data, timing);
                return response.data;
            } catch (error) {
                const timing = Date.now() - start;
                addResult(name, false, error.response?.data || error.message, timing);
                return null;
            }
        }
        
        async function testPosts() {
            await testEndpoint('Posts Debug', '/api/debug/posts');
        }
        
        async function testUsers() {
            await testEndpoint('Users Debug', '/api/debug/users');  
        }
        
        async function testFriends() {
            await testEndpoint('Friends Debug', '/api/debug/friends');
        }
        
        async function testLeaderboard() {
            await testEndpoint('Leaderboard Debug', '/api/debug/leaderboard');
        }
        
        // Auto-test on load
        setTimeout(async () => {
            document.getElementById('results').innerHTML = '<div class="text-center text-blue-600 py-4">🔄 Running initial tests...</div>';
            await testPosts();
            await testUsers();
        }, 1000);
    </script>
</body>
</html>